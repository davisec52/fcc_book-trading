<%include ./partials/dash-header %>

	<div class="body-container">
		<div class="row-title-profile">
			<h3>Personal Admin Dashboard</h3>
			<!-- <p id="sub-title">A book exchange swap nexus</p> -->
		</div>
		<div class="dash-container">
			<div class="row-features-dash">
				<form id="search">
					<label for="search"><Search</label>
					<input type="search" id="search-input" name="search" autoFocus></input>
					<input id="search-btn" type="submit"></input>
					<!-- <a id="add-btn" href="/add-book/">add</a> -->
				</form>

				<!-- modal div displays book titles generated by search -->
				<div class="book-container" id="title-modal">
					<div id="modal-head">
						<button id="close-btn">Close</button>
						<h4>Click on a book title to add it to your book collection.</h4>
					</div>
				</div> <!-- .book-container -->

				<div id="book-collection">
					<h3 id="book-coll-hd">Your Personal Collection</h3>
					<div id="catalog">
						<% user.books.forEach((book) => { %>
						<div class="catalog-item">
							<img src="<%=book.image %>" >
							<div class="delete-book">
								<form class="delete-form" action="/delete-book/id=<%=book.id %>&title=<%=book.title %>&ownerId=<%=book.ownerId %>?_method=DELETE" method="POST">
									<button type="submit " id="del-btn">Delete</button>
								</form>
							</div>
						</div>
					<% }); %>
					</div> <!-- catalog -->
				</div> <!-- book-collection -->

			</div> <!-- .row-features -->

			<div class="row-features-requests">
				<h3>Incoming Requests</h3>
				<div class="table-hd">
					<div class="row-cell">Book Title</div>
					<div class="row-cell">Time Created</div>
					<div class="row-cell">Coming from</div>
					<div class="row-cell">Status</div>
				</div>

			<% incoming.forEach((item) => { %>
					<div class="row">
						<div class="row-cell"><%=item.book %></div>
						<div class="row-cell"><%=item.created %></div>
						<div class="row-cell"><%=item.from %></div>
						<div class="row-cell" id="accept-btn-container">
							<% if(item.accept === true) { %>
								<div class="status-result row-cell">accept</div>
							<% }else if(item.accept === false) { %>
							<div class="status-result row-cell">reject</div>
							<%	} else { %>
							<div class="status-result row-cell">pending</div>
							<% } %>
							<div class="row-cell accept-btn"><a href="/accept/<%=true %>/<%=item.id %>"><div id="accept-trade" class="">Accept</div></a></div>
							<div class="row-cell accept-btn"><a href="/accept/<%=false %>/<%=item.id %>"><div id="reject-trade" class="">Reject</div></a></div>
							</div>
					</div> <!-- .row -->
		    	<%	}); %>
			</div>

			<div class="row-features-requests">
				<h3>Outgoing Requests</h3>
				<div class="table-hd-outgoing">
					<div class="row-cell">Book Title</div>
					<div class="row-cell">Time Created</div>
					<div class="row-cell">Going to</div>
					<div class="row-cell">Status</div>
				</div>
				<% outgoing.forEach((item) => { %>
					<div class="row-outgoing">
						<div class="row-cell"><%=item.book %><form action="/delete-req/<%=item.id %>/<%=item.to %>?_method=DELETE" method="POST"><button class="delete-req">delete</button></form></div>
						<div class="row-cell"><%=item.created %></div>
						<div class="row-cell"><%=item.to %></div>
						<% if(item.accept === true) { %>
							<div id="">accept</div>
					<% }else if(item.accept === false) { %>
						<div id="row-cell">reject</div>
					<%	}else { %>
						<!-- <div class="row-span"> -->
						<div id="row-cell">pending</div>
						<!-- <button>Delete</button>
						</div> -->
					<% } %>
					</div>
		    <%	}); %>
			</div>

		</div> <!-- .dash-container -->
		<div id="dash-spacing"></div>
	</div> <!-- .body-container -->

<% include ./partials/dash-footer %>